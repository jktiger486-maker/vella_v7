# CODEGEN-15 : RISK STRATEGY v1 (MINIMAL RULE)

## ëª©ì 
ì´ ë¬¸ì„œëŠ” VELLA_V7ì˜ **risk/risk.py**ì—
ì²« ë²ˆì§¸ **ìµœì†Œ ë¦¬ìŠ¤í¬ ê·œì¹™**ì„ ì •ì˜í•œë‹¤.

ì›ì¹™:
- ê·œì¹™ 1ê°œ
- ì„ê³„ê°’ 1ê°œ
- ê³„ì‚° ë‹¨ìˆœ
- í•´ì„ âŒ / ìµœì í™” âŒ

ğŸ‘‰ â€œë¦¬ìŠ¤í¬ íŒë‹¨ì´ ë…ë¦½ ëª¨ë“ˆë¡œ ì¡´ì¬í•œë‹¤â€ë¥¼ ì¦ëª…í•œë‹¤.


============================================================
## 0. ë³€ê²½ ëŒ€ìƒ
============================================================


vella_v7/modules/risk/risk.py



- PIT-5, PIT-6 ì ˆëŒ€ ì¤€ìˆ˜
- Entry / Exit ë¡œì§ ì¹¨ë²” âŒ
- Execution ê´€ì—¬ âŒ
- ìˆ˜ë™ ìˆ˜ì • âŒ (PIT â†’ CODEGEN ì¬ìƒì„±ë§Œ í—ˆìš©)


============================================================
## 1. ì „ëµ ê°œìš” (ì£¼ì¸ë‹˜ í™•ì¸ìš©)
============================================================

**Risk Rule v1**
- í¬ì§€ì…˜ì´ ìˆì„ ë•Œ
- ì§„ì… ì´í›„ ê²½ê³¼ ì‹œê°„ì´ ë„ˆë¬´ ì§§ìœ¼ë©´ â†’ â€œìœ„í—˜ ìƒíƒœâ€

âš ï¸ ì˜ë¯¸:
- ì§€ê¸ˆì€ ì†ì‹¤/ìˆ˜ìµ íŒë‹¨ì´ ëª©ì ì´ ì•„ë‹˜
- â€œë¦¬ìŠ¤í¬ ëª¨ë“ˆì´ ìƒíƒœë¥¼ íŒì •í•œë‹¤â€ëŠ” êµ¬ì¡° ê²€ì¦ ë‹¨ê³„


============================================================
## 2. risk.py (FULL CONTENT)
============================================================

```python
# ============================================================
# AUTO-GENERATED FILE â€” DO NOT EDIT MANUALLY
# SOURCE OF TRUTH: PIT-5, PIT-6, CODEGEN-15
# ============================================================

from typing import Optional
from vella_v7.contracts.contracts import (
    ContextSnapshot,
    EngineState,
    RiskSignal,
)


# ------------------------------------------------------------
# Strategy constants (v1)
# ------------------------------------------------------------
MIN_HOLD_SECONDS = 10   # minimal holding time gate


def evaluate_risk(
    context: ContextSnapshot,
    state: EngineState,
) -> Optional[RiskSignal]:
    """
    Risk Strategy v1 (Minimal)

    Rules:
    - One condition
    - No PnL
    - No price logic
    """

    # --------------------------------------------------------
    # Guard: only if in position
    # --------------------------------------------------------
    if not state.has_position:
        return None

    # --------------------------------------------------------
    # Guard: entry time must exist
    # --------------------------------------------------------
    if state.entry_time is None:
        return None

    # --------------------------------------------------------
    # Rule v1: minimum holding time gate
    # --------------------------------------------------------
    held_seconds = context.timestamp - state.entry_time
    if held_seconds >= MIN_HOLD_SECONDS:
        return None

    # --------------------------------------------------------
    # Emit risk signal
    # --------------------------------------------------------
    return RiskSignal(
        risk_type="EARLY_EXPOSURE",
        severity=0.5,
    )


============================================================

3. ì˜ë„ì  ì œì•½ (ì¤‘ìš”)

============================================================

ì†ì ˆ(SL) âŒ

ìµì ˆ(TP) âŒ

ê°€ê²©, í¼ì„¼íŠ¸ âŒ

ê³„ì¢Œ ë¹„ìœ¨ âŒ

ë™ì  ê³„ì‚° âŒ

ì´ RiskëŠ” **â€œíŒë‹¨ ì¡´ì¬ ì¦ëª…ìš©â€**ì´ë‹¤.

============================================================

4. ì‹¤íŒ¨ ë°©ì§€ ì²´í¬ë¦¬ìŠ¤íŠ¸

============================================================

ì•„ë˜ê°€ ë³´ì´ë©´ ì¦‰ì‹œ ìœ„ë°˜ì´ë‹¤.

pnl, profit, loss

percent, ratio

leverage

dynamic sizing

adaptive logic

ì „ë¶€ ì‚­ì œ.

============================================================

5. ìµœì¢… ì„ ì–¸

============================================================

RiskëŠ” Entry/Exitì™€ ë¶„ë¦¬ë˜ì—ˆë‹¤

StateëŠ” ì½ê¸° ì „ìš©ì´ë‹¤

íŒë‹¨ â†’ Signal ë°©ì¶œ êµ¬ì¡°ê°€ í™•ì •ë˜ì—ˆë‹¤
